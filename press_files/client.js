!function(b,a,c){typeof module!="undefined"&&module.exports?module.exports=c():a[b]=c()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||window.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){if(e._aborted){return n(e.request)}if(e._timedOut){return n(e.request,"Request is aborted: timeout")}e.request&&e.request[readyState]==4&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request))}}function setHeaders(e,t){var n=t.headers||{},r;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var i=typeof FormData=="function"&&t.data instanceof FormData;!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),!n[contentType]&&!i&&(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n){n.hasOwnProperty(r)&&"setRequestHeader" in e&&e.setRequestHeader(r,n[r])}}function setCredentials(e,t){typeof t.withCredentials!="undefined"&&typeof e.withCredentials!="undefined"&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,s=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),u=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),a=r.match(u),f=doc.createElement("script"),l=0,c=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return a?a[3]==="?"?r=r.replace(u,"$1="+o):o=a[3]:r=urlappend(r,s+"="+o),win[o]=generalCallback,f.type="text/javascript",f.src=r,f.async=!0,typeof f.onreadystatechange!="undefined"&&!c&&(f.htmlFor=f.id="_reqwest_"+i),f.onload=f.onreadystatechange=function(){if(f[readyState]&&f[readyState]!=="complete"&&f[readyState]!=="loaded"||l){return !1}f.onload=f.onreadystatechange=null,f.onclick&&f.onclick(),t(lastValue),lastValue=undefined,head.removeChild(f),l=1},head.appendChild(f),{abort:function(){f.onload=f.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=undefined,head.removeChild(f),l=1}}}function getRequest(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),i=typeof n=="string"?n:n.url,s=n.processData!==!1&&n.data&&typeof n.data!="string"?reqwest.toQueryString(n.data):n.data||null,o,u=!1;return(n.type=="jsonp"||r=="GET")&&s&&(i=urlappend(i,s),s=null),n.type=="jsonp"?handleJsonp(n,e,t,i):(o=n.xhr&&n.xhr(n)||xhr(n),o.open(r,i,n.async===!1?!1:!0),setHeaders(o,n),setCredentials(o,n),win[xDomainRequest]&&o instanceof win[xDomainRequest]?(o.onload=e,o.onerror=t,o.onprogress=function(){},u=!0):o.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(o),u?setTimeout(function(){o.send(s)},200):o.send(s),o)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(e.match("json")){return"json"}if(e.match("javascript")){return"js"}if(e.match("text")){return"html"}if(e.match("xml")){return"xml"}}function init(o,fn){function complete(e){o.timeout&&clearTimeout(self.timeout),self.timeout=null;while(self._completeHandlers.length>0){self._completeHandlers.shift()(e)}}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r){switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}}self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);while(self._fulfillmentHandlers.length>0){resp=self._fulfillmentHandlers.shift()(resp)}complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;while(self._errorHandlers.length>0){self._errorHandlers.shift()(e,t,n)}complete(e)}this.url=typeof o=="string"?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n=e.name,r=e.tagName.toLowerCase(),i=function(e){e&&!e.disabled&&t(n,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))},s,o,u,a;if(e.disabled||!n){return}switch(r){case"input":/reset|button|image|file/i.test(e.type)||(s=/checkbox/i.test(e.type),o=/radio/i.test(e.type),u=e.value,(!s&&!o||e.checked)&&t(n,normalize(s&&u===""?"on":u)));break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one"){i(e.selectedIndex>=0?e.options[e.selectedIndex]:null)}else{for(a=0;e.length&&a<e.length;a++){e.options[a].selected&&i(e.options[a])}}}}function eachFormElement(){var e=this,t,n,r=function(t,n){var r,i,s;for(r=0;r<n.length;r++){s=t[byTag](n[r]);for(i=0;i<s.length;i++){serial(s[i],e)}}};for(n=0;n<arguments.length;n++){t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),r(t,["input","select","textarea"])}}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var i,s,o,u=/\[\]$/;if(isArray(t)){for(s=0;t&&s<t.length;s++){o=t[s],n||u.test(e)?r(e,o):buildParams(e+"["+(typeof o=="object"?s:"")+"]",o,n,r)}}else{if(t&&t.toString()==="[object Object]"){for(i in t){buildParams(e+"["+i+"]",t[i],n,r)}}else{r(e,t)}}}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +(new Date),lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials" in t){return t}if(win[xDomainRequest]){return new XDomainRequest}throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0){return""}var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,i=t||!1,s=[],o=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():t==null?"":t,s[s.length]=o(e)+"="+o(t)};if(isArray(e)){for(r=0;e&&r<e.length;r++){u(e[r].name,e[r].value)}}else{for(n in e){e.hasOwnProperty(n)&&buildParams(n,e[n],i,u)}}return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e){globalSetupOptions[t]=e[t]}},reqwest});function CallService(){var Y="widget",aS=null,I=0,aN=false,Z=-1,a4=0,au=null,aG=null,aa=null,an=null,j=0,C=[],y=null,a6=null,a7=null,O=null,F=null,bb=null,aT="uptocall-btn-disabled",v="uptocall-office-open",aj,ah=0,ax=false,M=(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("CriOS")==-1),aC=navigator.userAgent.match(/iPad/i)!=null,av=navigator.userAgent.match(/iPhone /i)!=null,e=null,a,aZ,aM;var R,q,aY,aD,aF,aU,aQ,a3,p,a9,at,aE,ab,aL,S,aK,L,W,aV,N,g,X,aX,az,G,aW,B,P,k,t,al,V,aI,A,aB;function ak(d){return document.getElementById(d)}function c(bd){if(!bd||bd.nodeName!=="FORM"){return}var bc,d,be=[];for(bc=bd.elements.length-1;bc>=0;bc=bc-1){if(bd.elements[bc].name===""){continue}switch(bd.elements[bc].nodeName){case"INPUT":switch(bd.elements[bc].type){case"text":case"hidden":case"tel":case"email":case"password":case"button":case"reset":case"submit":be.push(bd.elements[bc].name+"="+encodeURIComponent(bd.elements[bc].value));break;case"checkbox":case"radio":if(bd.elements[bc].checked){be.push(bd.elements[bc].name+"="+encodeURIComponent(bd.elements[bc].value))}break;case"file":break}break;case"TEXTAREA":be.push(bd.elements[bc].name+"="+encodeURIComponent(bd.elements[bc].value));break;case"SELECT":switch(bd.elements[bc].type){case"select-one":be.push(bd.elements[bc].name+"="+encodeURIComponent(bd.elements[bc].value));break;case"select-multiple":for(d=bd.elements[bc].options.length-1;d>=0;d=d-1){if(bd.elements[bc].options[d].selected){be.push(bd.elements[bc].name+"="+encodeURIComponent(bd.elements[bc].options[d].value))}}break}break;case"BUTTON":switch(bd.elements[bc].type){case"reset":case"submit":case"button":be.push(bd.elements[bc].name+"="+encodeURIComponent(bd.elements[bc].value));break}break}}return be.join("&")}function aq(d){if(d){d.style.display="none"}}function a8(d){if(d){d.style.display="block"}}function ar(d){if(d){d.style.display="inline"}}function ap(d){if(d<=9){return"0"+d}return d}function aA(bf){var be=":";var d=Math.floor(bf/6000);bf=bf-d*6000;var bd=Math.floor(bf/100);var bc=bf-bd*100;return ap(d)+be+ap(bd)+be+ap(bc)}function m(){aa--;if(aa<0){clearInterval(aG)}else{aY.innerHTML=aA(aa)}}var ac=function(bc){var d=document.createElement("a");d.href=bc;return d};function U(d){return d.replace(/(?:((?:\/\/)|^)www\.)(?=[^/]*?\.)/i,"$1")}function s(d){d=d.replace(/[^0-9]/g,"");if(d.length>=10&&d.length<=12){return true}else{return false}}function a0(bc,bd){var d=new RegExp("(^|\\s)"+bd+"(\\s|$)","g");if(d.test(bc.className)){return}bc.className=(bc.className+" "+bd).replace(/\s+/g," ").replace(/(^ | $)/g,"")}function a5(bc,bd){var d=new RegExp("(^|\\s)"+bd+"(\\s|$)","g");bc.className=bc.className.replace(d,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}function ba(bc,d){return new RegExp("(\\s|^)"+d+"(\\s|$)").test(bc.className)}function aP(bd,bg,be){be=be||{};var bj=be.expires;if(typeof bj=="number"&&bj){var bi=new Date();bi.setTime(bi.getTime()+bj*1000);bj=be.expires=bi}if(bj&&bj.toUTCString){be.expires=bj.toUTCString()}bg=encodeURIComponent(bg);var bc=bd+"="+bg;for(var bf in be){bc+="; "+bf;var bh=be[bf];if(bh!==true){bc+="="+bh}}document.cookie=bc+("; path=/")}function x(d,bd){var bc=document.cookie.match(new RegExp("(?:^|; )"+d.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return bc?decodeURIComponent(bc[1]):bd}function aR(bc){var bd,d;bd=function(be){if(/&[^;]+;/.test(be)){var bf=document.createElement("div");bf.innerHTML=be;return !bf.firstChild?be:bf.firstChild.nodeValue}return be};if(typeof bc==="string"){return bd(bc)}else{if(typeof bc==="object"){for(d in bc){if(typeof bc[d]==="string"){bc[d]=bd(bc[d])}}}}return bc}function aO(bc,d){return((d instanceof Array)?d.join(bc):d)}var H=function(be,bc,bd){var d;if(bc){d=bc.length;bd=bd?bd<0?Math.max(0,d+bd):bd:0;for(;bd<d;bd++){if(bd in bc&&bc[bd]===be){return bd}}}return -1};var ad=function(be,bd,bc,d){if(d=="undefined"){d=false}if(be==null||typeof(be)=="undefined"){return}if(be.addEventListener){be.addEventListener(bd,bc,d)}else{if(be.attachEvent){be.attachEvent("on"+bd,bc)}else{be["on"+bd]=bc}}};var am=function(be,bd,bc){var d=be.events&&be.events[bd];if(!d){return}delete d[bc.guid];for(var bf in d){return}if(be.removeEventListener){be.removeEventListener(bd,be.handle,false)}else{if(be.detachEvent){be.detachEvent("on"+bd,be.handle)}}delete be.events[bd];for(var bf in be.events){return}try{delete be.handle;delete be.events}catch(bg){be.removeAttribute("handle");be.removeAttribute("events")}};var b={regex:new RegExp("[0-9]"),codes:[]};var K=function(d,bc){this.opt={elem:d,country:bc.country,phone:bc.phone,mask:bc.mask,onsend:bc.onsend,value:"",name:bc.name,regex:"[0-9]",old:{}};this.init()};K.prototype={init:function(){var bd=this,bc=bd.opt.elem;bc.value=bd.opt.mask;bc.placeholder=bd.opt.mask;bd.addActions(bc);var d=A.getElementsByTagName("li");for(i=0;i<d.length;i++){d[i].onclick=function(){bd.maskReplace(this);aB.innerHTML='<div class="uptocall-flags-flag '+this.getAttribute("data-iso-code")+'"><i class="uptocall-flags-caret"></i></div>';a5(A,"active")}}return this},maskReplace:function(bd){var bh=e,bi=bh.opt.elem,bg=bd.dataset,bf=bh.findMaskByCode(bh.opt.country),be=bh.findMaskByCode(bg.isoCode),bc,d;bh.opt.mask=be.mask;bc=bh.getVal(bi.value).replace(bf.phone_code,be.phone_code);d=bh.opt.mask.replace(new RegExp([b.regex.source].concat("_").join("|"),"g"),"_");bi.value=bh.setNewMaskValue(bc,d);bi.placeholder=be.mask;bh.opt.value=bi.value;bh.opt.name=be.name;bh.opt.country=be.iso_code},addActions:function(d){ad(d,"focus",this.focused);ad(d,"click",this.focused);ad(d,"keydown",this.keydown);ad(d,"keyup",this.keyup);ad(d,"paste",this.paste)},focused:function(){var bc=e.opt.elem,bf=bc.value,be=bf.indexOf("_"),bd=-1===be?bf.length:be;e.setCaret(bc,bd,bd)},keydown:function(d){var bj,bh,bg=b.regex,bi=e,bf=d.which||d.keyCode,be=d.ctrlKey||d.metaKey,bd=d.key?d.key:bf>=96&&105>=bf?String.fromCharCode(bf-48):String.fromCharCode(bf),bc=this.value;if(bf===8){bj=bi.getLastNum(this);if(bg.test(bc[bj])===true){bi.removeChar(this,bj);bi.setCaret(this,bj,bj);bi.setCheckedMask(this)}d.preventDefault();d.stopPropagation();return false}else{if(be===!0&&bf===86){return true}else{bh=bc.indexOf("_");if(bh===-1){if(bi.ifIssetNextMask()&&bg.test(bd)===o){return true}else{d.preventDefault();d.stopPropagation();return false}}else{if(bg.test(bd)!==true){d.preventDefault();d.stopPropagation();return false}else{return void (bi.setCaret(this,bh,bh+1))}}}}},keyup:function(be){var d,bi,bf=b.regex,bg=e,bd=be.keyCode||be.which,bh=this.value,bc=bg.opt;if(bd===8){d=bg.getLastNum(this);if(bf.test(bh[d])===true){d+=1;bg.setCaret(this,d,d);bg.setCheckedMask(this)}be.preventDefault();be.stopPropagation();return false}else{if(bd===13){if(bc.onsend){bc.onsend(bc)}}else{bi=bh.indexOf("_");if(d=(-1===bi)){bg.setCaret(this,!d,!d);bi=bh.length}bg.setCheckedMask(this)}return void (bi)}},paste:function(d){d.preventDefault();var bd=e;var bc=(d.originalEvent||d).clipboardData.getData("text/plain");this.value=bd.getVal(bc);bd.setCheckedMask(this,!0)},setCaret:function(bd,bc,bg){var bf="character";if(bd.focus(),bd.setSelectionRange){bd.setSelectionRange(bc,bg)}else{if(bd.createTextRange){var be=bd.createTextRange();be.collapse(true);be.moveEnd(bf,bc);be.moveStart(bf,bg);be.select()}}},getLastNum:function(bc){var d,bd=bc.value;for(d=bd.length;d>=0&&!b.regex.test(bd[d]);d--){}return d},removeChar:function(bc,d){var bd=bc.value.split("");bd[d]="_";bc.value=bd.join("")},setCheckedMask:function(be,bm){var bl,bk,bi,bd,bj=this.getVal(be.value),bf=this.maskFinder(b.codes.all,bj),bc=this.opt.old;if(bf===false){bf=this.maskFinder(b.codes.all,bj.length>6?bj.substring(0,6):bj)}if(bf===false){bf=this.findMaskByCode(au.masks[0]);if(bf!==false){aB.innerHTML='<div class="uptocall-flags-flag '+bf.iso_code+'"><i class="uptocall-flags-caret"></i></div>';bf.obj=bf}}if(bf!==false){bl=bf.obj.iso_code;bd=typeof b.codes[bl]!=="undefined"?b.codes[bl]:false;if(bd!==false){for(var bg=6;bg>=2;bg--){var bh=bj.length>bg?bj.substring(0,bg):bj;bi=this.maskFinder(bd,bh);if(bi&&bi.determined){bf=bi;break}}}if(typeof bf.obj.name==="undefined"&&bc.obj!=bf.obj){bk=this.findMaskByCode(bl);if(bk){bf.obj.name=bk.name}}if(bf&&(bc.obj!=bf.obj||bc.determined!=bf.determined)||"undefined"!=typeof bm){this.opt.old=bf;this.setInputAttrs(be,bf.obj.iso_code,bf.obj.name,this.setNewMaskValue(bj,bf.mask));this.focused(be)}}},getVal:function(d){return d.replace(/\D+/g,"")},ifIssetNextMask:function(){var bd=this.opt,bc=b,bj=bd.country,bi=bc.codes,bh=bd.elem.value,bg=bh.replace(new RegExp([bc.regex.source].concat("_").join("|"),"g"),"_").replace(/[+()-]/g,"").length;if(typeof bi[bj]!=="undefined"){for(var bf in bi[bj]){if(bi[bj].hasOwnProperty(bf)){var be=bi[bj][bf].mask.replace(new RegExp([bc.regex.source].concat("_").join("|"),"g"),"_").replace(/[0-9+()-]/g,"").length;if(be>bg){return !0}}}}return !1},maskFinder:function(bc,be){var bp,bo,bn,bm,bl,bk,bi,bh,bj=[],bg=b.regex;for(bp in bc){if(bc.hasOwnProperty(bp)){for(bk=bc[bp].mask,bi=!0,bo=0,bn=0;bo<be.length&&bn<bk.length;){var bf=bk.charAt(bn),bd=be.charAt(bo);if(bg.test(bf)||"_"===bf){if(!("_"===bf&&bg.test(bd)||bd==bf)){bi=!1;break}bo++;bn++}else{bn++}}if(bi&&bo==be.length){if(bh=-1==bk.substr(bn).search(bg)){bk=bk.replace(new RegExp([bg.source].concat("_").join("|"),"g"),"_");bj.push({mask:bk,obj:bc[bp],determined:bh})}}}}bl=!1;for(bp in bj){bj.hasOwnProperty(bp)&&(bm=this.getVal(bj[bp].obj.mask),parseInt(bm)===parseInt(be)&&(bl=bj[bp]))}return bl||bj[0]||!1},findMaskByCode:function(bc){var d,bd;for(d in b.codes.all){if(b.codes.all.hasOwnProperty(d)&&(bd=b.codes.all[d],bd.iso_code===bc)&&bd.phone_code){return bd}}return !1},setNewMaskValue:function(bf,be){var bd,bi,bh=this.getVal(bf),bc=be.split(""),bg=0;for(bd in bc){bc.hasOwnProperty(bd)&&(bi=bc[bd],"_"==bi&&bg<bh.length&&(bc[bd]=bh[bg],bg++))}return bc.join("")},setInputAttrs:function(be,bf,bc,d){be.value=d;var bd=this.opt;aB.innerHTML='<div title="'+bc+'" class="uptocall-flags-flag '+bf+'"><i class="uptocall-flags-caret"></i></div>';bd.country=bf;bd.name=bc;bd.value=d}};function r(bc){if(C.length){console.log("send yametrika...");for(var d in C){if(typeof C[d].reachGoal=="function"){C[d].reachGoal(bc)}}}if(y){console.log("send googleAnalitics...");y.reachGoal(bc)}}function z(){j--;if(j<=0){T("on_view");aP("uptocall_view",j,{expires:-1});clearInterval(an)}else{aP("uptocall_view",j)}}function J(){reqwest({url:CallBaseUrl+"/"+Y+"/close/?site="+CallSiteId+"&c="+ah,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(d){if(d.status==0){console.log("close log complete")}}})}function E(d){aM=d;var bc=x("call_ref");if(!bc){bc=""}reqwest({url:CallBaseUrl+"/"+Y+"/open/?site="+CallSiteId+"&ref="+encodeURIComponent(bc)+"&type="+d+"&c="+ah,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(bd){if(bd.status==0){console.log("open log complete")}}})}function w(d){q.value=q.getAttribute("data-"+d);p.innerHTML=p.getAttribute("data-"+d);a9.innerHTML=a9.getAttribute("data-"+d)}function T(bd){if(au.type=="mobile"){aN=false;f(bd);E(bd)}else{R.focus();console.log("open...");if(!aN){if(bd=="on_close"){r("UPTC_LEAVE")}r("UPTC_SHOW");aq(P);if((bd=="on_external")||(bd=="on_close")){w("onclose")}else{w("default")}aN=true;a8(g);for(var bc=0;bc<W.childNodes.length;bc++){if(W.childNodes[bc].id!="uptocallPopup"&&W.childNodes[bc].id!="uptocall-backdrop"){a0(W.childNodes[bc],"uptocall-blur")}}if(au.type=="panel"){var be=-340,d=N.offsetWidth;ao({delay:10,duration:200,delta:function(bf){return Math.pow(bf,2)},step:function(bf){if(au.type_direction=="right"){N.style.right=be+d*bf+"px"}else{N.style.left=be*(1-bf)+"px"}}})}else{a8(N);N.style.top=Math.round(window.innerHeight/2)+"px"}aP("uptocall_date",Z,{expires:31536000});aP("uptocall_count",a4,{expires:31536000});aP("uptocall_view_page",0,{expires:-1});aP("uptocall_view",0,{expires:-1});E(bd);return false}}return true}function ag(){r("UPTC_CLOSE");a5(document.body,"modal-open");a8(P);for(var bc=0;bc<W.childNodes.length;bc++){if(ba(W.childNodes[bc],"uptocall-blur")){a5(W.childNodes[bc],"uptocall-blur")}}aq(g);if(au.type=="panel"){var bd=0,d=N.offsetWidth;ao({delay:10,duration:200,delta:function(be){return Math.pow(be,2)},step:function(be){if(au.type_direction=="right"){N.style.right=bd-d*be+"px"}else{N.style.left=bd-d*be+"px"}}})}else{aq(N)}J()}function aH(){var d=R.value;if(au.phone_mask==="mask"){d=aI.value+d}if(s(d)){if(!ba(L,"uptocall-form-submit")){if(V){if(parseInt(V.value)==0){a0(al,"uptocall-office-link-error");return false}}var bc=x("call_ref");if(!bc){bc=""}aP("call_ref",0,{expires:-1});r("UPTC_CALL");a0(L,"uptocall-form-submit");console.log("submit...");reqwest({url:CallBaseUrl+"/"+Y+"/submit/?site="+CallSiteId+"&"+c(L)+"&ref="+encodeURIComponent(bc)+"&timezone="+F+"&c="+ah+"&trigger="+aM,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(bd){if(bd.status==1){a5(L,"uptocall-form-submit");L.style.opacity=1}else{if(!G||G.value=="0"){a5(L,"uptocall-form-submit");console.log("start timer wait...");if(aY){aa=au.seconds*100;aG=setInterval(m,10)}aq(t);aq(R);aq(aI);aq(q);if(aF){a8(aF);a8(aU);aq(aQ)}if(bd.id){l();O=bd.id;reqwest({url:CallBaseUrl+"/"+Y+"/call/?site="+CallSiteId+"&id="+O+"&c="+ah,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(be){if(parseInt(be.status)==1){console.log("Error: "+be.message);if(au.type=="panel"){aq(p);aq(a9);aq(L)}if(au.type!="mobile"){if(aY){a0(aF,aT);a8(aE);clearInterval(aG)}}l()}}})}else{if(p){p.innerHTML=bd.header}if(a9){a9.innerHTML=bd.text}}}else{if(a9){a9.innerHTML=bd.text}}}}})}}else{a0(R,"uptocall-phone-error")}l();return false}function ay(){if(ak("uptocall-email").value.trim()!=""){if(ak("uptocall-message").value.trim()!=""){r("UPTC_MSG");var d=ak("uptocall-form-email");d.style.opacity=0.5;console.log("submit email...");reqwest({url:CallBaseUrl+"/"+Y+"/email/?site="+CallSiteId+"&"+c(d)+"&ref="+encodeURIComponent(ai)+"&timezone="+F+"&c="+ah,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(be){d.style.opacity=1;if(be.status==0){var bd=ak("uptocall-header-email"),bc=ak("uptocall-text-email");bd.innerHTML=bd.getAttribute("data-complete");bc.innerHTML=bc.getAttribute("data-complete");aq(d);a1()}}})}else{a0(ak("uptocall-message"),"uptocall-phone-error")}}else{a0(ak("uptocall-email"),"uptocall-phone-error")}return false}function f(d){if(!aN){if(!d){d="mobile"}aP("uptocall_date",Z,{expires:31536000});aP("uptocall_count",a4,{expires:31536000});aP("uptocall_view_page",0,{expires:-1});aP("uptocall_view",0,{expires:-1});a.setAttribute("content","width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0");a0(document.body,"uptocall-body-mobile");r("UPTC_SHOW");a8(N);console.log("show");E(d)}else{a.setAttribute("content",aZ);a5(document.body,"uptocall-body-mobile");r("UPTC_CLOSE");aq(N);console.log("hide");J()}aN=!aN;l()}function ao(d){var bd=new Date;var bc=setInterval(function(){var be=(new Date-bd)/d.duration;if(be>1){be=1}d.step(be);if(be==1){clearInterval(bc)}},d.delay||10)}function h(){var bc=0,d=0;if(typeof(window.innerWidth)=="number"){bc=window.innerWidth;d=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){bc=document.documentElement.clientWidth;d=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){bc=document.body.clientWidth;d=document.body.clientHeight}}}return{width:bc,height:d}}function D(){var bc=0,d=0;if(typeof(window.pageYOffset)=="number"){d=window.pageYOffset;bc=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){d=document.body.scrollTop;bc=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){d=document.documentElement.scrollTop;bc=document.documentElement.scrollLeft}}}return{x:bc,y:d}}function l(){var bc=1;if(au.type=="mobile"){bc=0.57*(window.innerWidth/window.screen.width);var d=parseInt(aW.getAttribute("data-width")),be=parseInt(aW.getAttribute("data-height"));aW.style.cssText="position:fixed;top:"+bf+"px;-webkit-transform-origin: 0 0;-moz-transform-origin: 0 0;-o-transform-origin: 0 0;-ms-transform-origin: 0 0;transform-origin: 0 0;-webkit-transition-property: bottom,top;-webkit-transition-duration: 0.1s;transition-duration:0.1s-moz-transform: scale("+bc+");-ms-transform: scale("+bc+");-webkit-transform: scale("+bc+");-o-transform: scale("+bc+");transform: scale("+bc+");margin-top:-"+(be*bc)+"px;margin-left:-"+(d*bc/2)+"px;width:"+(bc>1?d*bc:d)+"px;";if(bc>1){var bi=document.getElementsByClassName("uptocall-start-icon");for(var bd=0;bd<bi.length;bd++){bi[bd].style.cssText="padding:"+Math.ceil(12*bc)+"px 0 0 "+Math.ceil(12*bc)+"px;"}}var bf=Math.round((N.clientHeight-g.clientHeight)/2);var bj=0;if(aN){if(ax&&M&&(aC||av)){var bk=R.getBoundingClientRect();var bh=window.screen.availWidth;bj=Math.round(bk.top-bh/2)}g.style.cssText="margin-top:"+(bf-bj)+"px!important"}}else{if(au.type=="panel"){var bg=h(),bl=ak("uptocall-dialog");bl.style.height=bg.height+"px";a1()}}}function a1(){if(au.type=="panel"){var d=0;if(au.widget_email){d=-Math.round((aV.clientHeight-70)/2)}else{d=-Math.round((aV.clientHeight)/2)}aV.style.marginTop=d+"px"}}function Q(){switch(au.phone_mask){case 1:R.value=au.masks+R.value;R.onkeyup=function(bg){if(bg.keyCode<35||bg.keyCode>39){var bh=this.value.indexOf(au.masks,0);if(bh==-1){this.value=au.masks}var bf=this.value.substr(au.masks.length);if(au.ban_symbols){bf=bf.replace(/[^0-9\+]/g,"")}this.value=this.value.substr(0,au.masks.length)+bf}a5(this,"uptocall-phone-error")};break;case 2:A=ak("uptocall-flags-lists");aB=ak("uptocall-flags-selected");var bc=[],be=-1,bd,d=[];b.codes.all.forEach(function(bh,bg,bf){if(bh.iso_code==au.masks[0]){bd=bh}be=H(bh.iso_code,au.masks);if(be!==-1){bc[be]='<li class="uptocall-country" data-iso-code="'+bh.iso_code+'" data-mask="'+bh.mask+'"><i class="uptocall-flags-flag '+bh.iso_code+'"></i><span class="uptocall-flags-name">'+bh.name+'</span><span class="uptocall-flags-code">+'+bh.phone_code+"</span></li>";d.push(bh)}});A.innerHTML=aO("",bc);b.codes.all=d;aB.onclick=function(){if(ba(A,"active")){a5(A,"active")}else{a0(A,"active")}};e=new K(R,{country:bd.iso_code,phone:bd.phone_code,mask:bd.mask,name:bd.name,onsend:aH});break;case 0:default:if(au.ban_symbols){R.onkeyup=function(bf){if(bf.keyCode<35||bf.keyCode>39){this.value=this.value.replace(/[^0-9\+]/g,"")}a5(this,"uptocall-phone-error")}}}}function aw(){var d=D();if(d.y>500){P.style.display="block"}}function aJ(){var bp=true,bo,bD,by,bd,bv;Z=x("uptocall_date");if(!Z){Z=new Date()}else{Z=new Date(Z)}a4=parseInt(x("uptocall_count",0));var bB=new Date();if(a4>=au.show_count){if((bB.getTime()-Z.getTime())/3600000<=au.show_time){bp=false}else{Z=new Date()}}console.log("setup "+au.type+"...");W=document.body;W.insertAdjacentHTML("beforeend",au.form);g=ak("uptocall-backdrop");N=ak("uptocallPopup");aK=ak("uptocall-btn-exit");L=ak("uptocall-form");p=ak("uptocall-header");a9=ak("uptocall-text");R=ak("uptocall-phone");q=ak("uptocall-submit");aF=ak("uptocall-btn-success");aU=ak("uptocall-btn-failed");aQ=ak("uptocall-added-container");a3=ak("uptocall-added");at=ak("uptocall-added-back");aE=ak("uptocall-repeat-container");ab=ak("uptocall-repeat-call");aD=ak("uptocall-countdown-container");aY=ak("uptocall-countdown");aL=ak("uptocall-rating-container");S=ak("uptocall-rating");X=ak("uptocall-select-date");aX=ak("uptocall-select-hour");az=ak("uptocall-select-minute");G=ak("uptocall-delayed");aW=ak("uptocall-start");B=ak("uptocall-start-widget");P=ak("uptocall-mini");k=ak("uptocall-mini-main");t=ak("uptocall-office-text");al=ak("uptocall-office-link");V=ak("uptocall-office");aI=ak("uptocall-phone-mask");if(au.type=="mobile"){a=document.querySelector("meta[name=viewport]");if(a!=null){aZ=a.getAttribute("content")}else{aZ="";var bm=document.createElement("meta");bm.setAttribute("name","viewport");bm.setAttribute("content","");document.head.appendChild(bm);a=document.querySelector("meta[name=viewport]")}g=ak("uptocall-body");ad(window,"resize",l);ad(document,"scroll",l);ad(document,"drag",l);ad(document,"pinch",l);ad(document,"rotate",l);ad(document,"orientationchange",l);if(M&&(aC||av)){document.addEventListener("focusin",function(bG){ax=true;if(bG.target.tagName==="INPUT"){document.body.scrollTop=0;l()}});ad(document,"focusout",function(){ax=false;l()});ad(document,"blur",l)}l();B.onclick=f;aK.onclick=f;if(M&&(aC||av)){document.addEventListener("focusin",function(bG){ax=true;if(bG.target.tagName==="INPUT"){document.body.scrollTop=0;if(M&&(aC||av)){aq(aK)}l()}});ad(document,"focusout",function(){ax=false;if(M&&(aC||av)){a8(aK)}l()});ad(document,"blur",l)}}else{aK.onclick=ag;ad(window,"resize",l)}L.onsubmit=aH;if(aY){aY.innerHTML=aA(au.seconds*100)}ad(window,"load",function(){var bG=document.getElementsByTagName("a");for(var bH=0;bH<bG.length;bH++){if(bG[bH].hash=="#uptocall"){console.log("setup open link");bG[bH].onclick=function(){aN=false;T("link");return false}}}});if(au.type=="panel"){ad(window,"load",function(){var bG=document.getElementsByTagName("a");for(var bH=0;bH<bG.length;bH++){if(bG[bH].hash=="#uptomail"){console.log("setup open link mail");bG[bH].onclick=function(){aN=false;T("link");a5(bE,"active");a0(d,"active");aq(bh);a8(be);aV=be;a1();return false}}}})}Q();if(au.type=="panel"){var bE=ak("uptocall-status-call"),d=ak("uptocall-status-email"),bh=ak("uptocall-body-call"),be=ak("uptocall-body-email"),bs=ak("uptocall-dialog"),br=ak("uptocall-form-email"),bw=h();bs.style.height=bw.height+"px";aV=bh;if(bE){bE.onclick=function(){if(!ba(bE,"active")){a5(d,"active");a0(bE,"active");aq(be);a8(bh);aV=bh;a1()}return false};d.onclick=function(){if(!ba(d,"active")){a5(bE,"active");a0(d,"active");aq(bh);a8(be);aV=be;a1()}return false};br.onsubmit=ay;ak("uptocall-email").onfocus=function(){a5(this,"uptocall-phone-error")};ak("uptocall-message").onfocus=function(){a5(this,"uptocall-phone-error")}}}if(au.use_office&&au.type!="mobile"){var bF=ak("uptocall-office-list");al.onclick=function(){if(!ba(this,v)){a0(this,v);a8(bF)}else{a5(this,v);aq(bF)}a5(al,"uptocall-office-link-error");return false};$office_links=bF.getElementsByTagName("a");for(by=0;by<$office_links.length;by++){$office_links[by].onclick=function(){V.value=this.rel;al.innerHTML="<span>"+this.innerHTML+"</span>";a5(al,v);aq(bF);return false}}}if(aF){aF.onclick=function(){if(!ba(this,aT)){a0(aU,aT);clearInterval(aG);a8(aL);if(au.type=="panel"||au.type=="mobile"){aq(p);aq(a9);aq(L)}a1()}return false}}if(aU){aU.onclick=function(){if(!ba(this,aT)){a0(aF,aT);clearInterval(aG);a8(aE);if(au.type=="panel"||au.type=="mobile"){aq(p);aq(a9);aq(L)}a1()}return false}}if(ab){ab.onclick=function(){a8(t);if(au.type=="panel"||au.type=="mobile"){a8(p);a8(a9);a8(L)}aq(aE);a5(aF,aT);a5(aU,aT);if(aY){aY.innerHTML=aA(au.seconds*100)}a1();aH();return false}}if(a3){a3.onclick=function(){aq(aD);a8(X);a8(aX);a8(az);aq(a3);ar(at);G.value=1;w("waiting");a1();return false}}if(at){at.onclick=function(){a8(aD);aq(X);aq(aX);aq(az);aq(at);ar(a3);G.value=0;w("default");a1();return false}}ad(X,"change",function(){var bH="";for(var bG in au.days[this.value].hours){if(typeof au.days[this.value].hours[bG]==="string"){bH+='<option value="'+bG+'">'+au.days[this.value].hours[bG]+"</option>"}}aX.innerHTML=bH});if(S){var bg=S.getElementsByTagName("a");for(by=0;by<bg.length;by++){ad(bg[by],"mouseover",function(){for(var bG=0;bG<bg.length;bG++){a5(bg[bG],"active")}for(bG=0;bG<this.rel;bG++){a0(bg[bG],"active")}});bg[by].onclick=function(){reqwest({url:CallBaseUrl+"/"+Y+"/rating/?site="+CallSiteId+"&call_id="+O+"&rating="+this.rel+"&c="+ah,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(bG){if(bG.status==0){console.log("rating update complete");ag()}}});return false}}}var bx=x("uptocall-mini-hide");if(P){if(au.type=="panel"){var bi={big:{w:230,h:435,size:85},normal:{w:220,h:428,size:77},small:{w:215,h:415,size:70}};var bu=document.getElementsByClassName("uptocall-mini-quick"),bn=document.getElementsByClassName("uptocall-mini-icon");if(au.widget_email){var bA,bz=ak("uptocall-mini-email"),bk=ak("uptocall-mini-phone");function bC(bG){if(bG<bu.length){aj=setTimeout(function(){a0(bu[bG],"uptocall-mini-opacity");bG++;bC(bG)},280)}}ad(P,"mouseenter",function(){if(!ba(P,"uptocall-mini-open")){clearInterval(bA);a0(P,"uptocall-mini-open");P.style.width=bi[au.mini_widget_size].w+"px";P.style.height=bi[au.mini_widget_size].h+"px";var bG=document.getElementsByClassName(".uptocall-mini-quick");bC(0)}});ad(P,"mouseleave",function(){bA=setTimeout(function(){a5(P,"uptocall-mini-open");clearInterval(aj);P.style.width=(bi[au.mini_widget_size].size)+"px";P.style.height=(bi[au.mini_widget_size].size)+"px";for(var bG=0;bG<bu.length;bG++){a5(bu[bG],"uptocall-mini-opacity")}},500)});bz.onclick=function(){aN=false;T("mini_widget");a5(bE,"active");a0(d,"active");aq(bh);a8(be);aV=be;a1();return false};bk.onclick=function(){aN=false;T("mini_widget");a5(d,"active");a0(bE,"active");aq(be);a8(bh);aV=bh;a1();return false}}k.onclick=function(){aN=false;T("mini_widget");if(au.widget_email){a5(d,"active");a0(bE,"active");aq(be);a8(bh)}aV=bh;a1();return false};g.onclick=function(){ag();return false};if(bx){aq(P)}else{ad(document,"scroll",aw);ad(document,"drag",aw)}if(bn.length>1){var bf=3000;function bq(bG){var bH=bn[bG];a0(bH,"uptocall-icon-show");setTimeout(function(){a5(bH,"uptocall-icon-show");bG++;if(bG>=bn.length){bG=0}bq(bG)},bf)}bq(0)}}else{if(bx){aq(P)}else{ad(document,"scroll",aw);ad(document,"drag",aw)}P.onclick=function(){bx=x("uptocall-mini-hide");if(!bx){if(ba(k,"uptocall-mini-close")){aq(P);aP("uptocall-mini-hide",1,{expires:86400});return false}else{aN=false;return T("mini_widget")}}};ad(P,"mouseover",function(){aj=setTimeout(function(){a0(k,"uptocall-mini-close")},5000)});ad(P,"mouseout",function(){clearInterval(aj);a5(k,"uptocall-mini-close")})}}if(au.on_new){if(!au.is_new_client){return false}}if(au.type=="mobile"&&!au.events_mobile){return false}var bj;if(bp){a4++;if(au.on_external){console.log("init on external");bo=U(window.location.hostname);bD=document.getElementsByTagName("a");for(by=0;by<bD.length;by++){if(!ba([by],"uptocall-no-external")){bv=ac(bD[by].href);bj=U(bv.hostname);if(bj!=bo){bD[by].onclick=function(bG){return T("on_external")}}}}bd=document.getElementsByTagName("form");for(by=0;by<bd.length;by++){bv=ac(bd[by].action);bj=U(bv.hostname);if(bj!=bo){bd[by].submit=function(){return T("on_external")}}}}if(au.on_close){console.log("init on close");setTimeout(function(){console.log("active on close");window.onmouseover=function(bJ){if(a6===null){if(bJ.clientY>60){a6=bJ.clientY;a7=new Date().getTime()}}else{var bG=new Date().getTime();var bH=bG-a7;var bK=a6-bJ.clientY;var bI=Math.abs(Math.round(bK/bH*100));if(bK>0&&bI>66&&bJ.clientY<60){T("on_close")}a6=bJ.clientY;a7=bG}}},au.on_close*1000)}if(au.on_user_inactivity){console.log("init user inactivity "+au.on_user_inactivity);function bc(){I--;if(I<0){clearInterval(aS);T("on_user_inactivity")}}function bl(){I=au.on_user_inactivity}I=au.on_user_inactivity;document.onmousemove=bl;aS=setInterval(bc,1000)}if(au.on_view){j=x("uptocall_view");if(!j){j=au.on_view}console.log("init view "+j);an=setInterval(z,1000)}if(au.on_view_page){var bt=x("uptocall_view_page");if(!bt){bt=1}else{bt++}console.log("init page view "+au.on_view_page+"/"+bt);if(bt>=au.on_view_page){T("on_view_page")}else{aP("uptocall_view_page",bt,{expires:31536000})}}}else{console.log("not auto open")}}function n(d,bc){reqwest({url:CallBaseUrl+"/"+Y+"/phones."+d+".php",type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(bd){delete (bd.responseText);bc(bd)}})}function af(be,d,bc,bd){be.sort(function(bi,bg){var bj=0,bh=0;for(;(bj<bi[bd].length&&bh<bg[bd].length);){var bf=bi[bd].charAt(bj);var bk=bg[bd].charAt(bh);if(!bc.test(bf)){bj++;continue}if(!bc.test(bk)){bh++;continue}if(H(bf,d)!=-1&&H(bk,d)==-1){return 1}if(H(bf,d)==-1&&H(bk,d)!=-1){return -1}if(H(bf,d)==-1&&H(bk,d)==-1){if(bf!=bk){return bf<bk?-1:1}}bj++;bh++}for(;(bj<bi[bd].length||bh<bg[bd].length);){if(bj<bi[bd].length&&!bc.test(bi[bd].charAt(bj))){bj++;continue}if(bh<bg[bd].length&&!bc.test(bg[bd].charAt(bh))){bh++;continue}if(bj<bi[bd].length){return -1}if(bh<bg[bd].length){return 1}}return 0});return be}function u(d){n("all",function(bc){b.codes.all=bc;af(b.codes.all,["#"],/[0-9]|#/,"mask");if(H("ru",au.masks)!==-1){n("ru",function(bd){b.codes.ru=bd;af(b.codes.ru,["#"],/[0-9]|#/,"mask");d()})}else{d()}})}ad(window,"load",function(){for(var d in window){if(/yaCounter\d+/i.test(d)){C.push(window[d])}}if(window._gaq){y={reachGoal:function(bc){_gaq.push(["_trackEvent","button","click",bc])}}}else{if(window.GoogleAnalyticsObject&&typeof window[window.GoogleAnalyticsObject]==="function"){y={reachGoal:function(bc){((window[window.GoogleAnalyticsObject])("send","event","button","click",bc));if(typeof(dataLayer)!=="undefined"){dataLayer.push({event:bc})}}}}}});var ae=new Date();F=-(ae.getTimezoneOffset()/60);console.log("Timezone "+F);var ai=document.referrer;var a2=ac(ai);if(a2.hostname!=location.hostname){aP("call_ref",ai,{expires:31536000})}else{ai=""}if(document.cookie){ah=1}aP("uptocall",1);if(x("uptocall")){ah=1}else{ah=0}console.log("request form...");reqwest({url:CallBaseUrl+"/"+Y+"/?site="+CallSiteId+"&timezone="+F+"&w="+screen.width+"&c="+ah+"&ref="+encodeURIComponent(ai),type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(be){if(be.status==0){au=be;console.log("Now time "+be.now_time);if(!ak("uptocallPopup")){if(be.need_update){reqwest({url:"https://profileex.com/match/?p=get_user_ajax",type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,success:function(bf){var bg="";if(bf.regions[0]){if(bf.regions[0].city){bg+=bf.regions[0].city}if(bf.regions[0].country){if(bg){bg+=", "}bg+=bf.regions[0].country}}if(bf.cookie_id){reqwest({url:CallBaseUrl+"/"+Y+"/info/?c="+ah,type:"jsonp",data:{cookie_id:bf.cookie_id,name:bf.firstname,email:bf.email,vk:bf.vk,phone:bf.phone,region:bg},contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback"})}}})}var bc="none",bd=x("uptocall_session_hidden"),d=x("uptocall_session_visible");if(bd){bc="hidden"}else{if(d){bc="visible"}}if(bc=="none"){switch(be.session){case"hidden":aP("uptocall_session_hidden",new Date());bc="hidden";break;case"visible":aP("uptocall_session_visible",new Date());bc="visible";break;default:break}}if(bc=="none"||bc=="visible"){if(au.phone_mask==2){u(function(){aJ()})}else{aJ()}}}}else{console.log("Error: "+be.message)}}})}if(!window.frameElement||window.location.host=="uptocall.com"){console.log("init...");CallService()}else{console.log("Error: not allow in frame")};